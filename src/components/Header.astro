---
// Header microminimalista con navegación móvil
---

<header class="header">
  <div class="header-content">
    <a href="#top" class="logo">
      <img src="/logos/logo.svg" alt="Logo" class="logo-img" />
    </a>
    
    <!-- Navegación desktop -->
    <nav class="nav-desktop">
      <ul class="nav">
        <li><a href="#features">Características</a></li>
        <li><a href="#products">Productos</a></li>
        <li><a href="#testimonials">Testimonios</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#contact">Contacto</a></li>
      </ul>
    </nav>
    
    <!-- Botón menú móvil -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Abrir menú">
      <svg class="menu-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>
  
  <!-- Overlay para cerrar el menú -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
  
  <!-- Sidebar móvil -->
  <nav class="mobile-sidebar" id="mobileSidebar">
    <div class="sidebar-header">
      <h3 class="sidebar-brand">Navegación</h3>
      <button class="sidebar-close-btn" id="sidebarCloseBtn" aria-label="Cerrar menú">
        <svg class="close-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    
    <ul class="sidebar-nav">
      <li><a href="#features" class="sidebar-link"><span>Características</span></a></li>
      <li><a href="#products" class="sidebar-link"><span>Productos</span></a></li>
      <li><a href="#testimonials" class="sidebar-link"><span>Testimonios</span></a></li>
      <li><a href="#faq" class="sidebar-link"><span>FAQ</span></a></li>
      <li><a href="#contact" class="sidebar-link"><span>Contacto</span></a></li>
    </ul>
  </nav>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuBtn = document.getElementById('mobileMenuBtn') as HTMLButtonElement | null;
    const sidebarCloseBtn = document.getElementById('sidebarCloseBtn') as HTMLButtonElement | null;
    const mobileSidebar = document.getElementById('mobileSidebar') as HTMLElement | null;
    const mobileMenuOverlay = document.getElementById('mobileMenuOverlay') as HTMLElement | null;
    const sidebarLinks = document.querySelectorAll<HTMLAnchorElement>('.sidebar-link');
    const header = document.querySelector('.header') as HTMLElement | null;
    
    // Validar que todos los elementos existan
    if (!mobileMenuBtn || !sidebarCloseBtn || !mobileSidebar || !mobileMenuOverlay) {
      console.warn('Elementos del menú móvil no encontrados');
      return;
    }
    
    // Función para abrir el sidebar
    function openSidebar() {
      if (!mobileSidebar || !mobileMenuOverlay) return;
      
      document.body.classList.add('sidebar-open');
      mobileSidebar.classList.add('active');
      mobileMenuOverlay.classList.add('active');
      
      // Prevenir scroll del body
      document.body.style.overflow = 'hidden';
    }
    
    // Función para cerrar el sidebar
    function closeSidebar() {
      if (!mobileSidebar || !mobileMenuOverlay) return;
      
      document.body.classList.remove('sidebar-open');
      mobileSidebar.classList.remove('active');
      mobileMenuOverlay.classList.remove('active');
      
      // Restaurar scroll del body
      document.body.style.overflow = '';
    }
    
    // Event listeners
    mobileMenuBtn.addEventListener('click', openSidebar);
    sidebarCloseBtn.addEventListener('click', closeSidebar);
    mobileMenuOverlay.addEventListener('click', closeSidebar);
    
    // Cerrar sidebar al hacer click en un link
    sidebarLinks.forEach(link => {
      link.addEventListener('click', () => {
        closeSidebar();
      });
    });
    
    // Función para manejar el evento de scroll
    function handleScroll() {
      if (header) {
        if (window.scrollY > 10) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
      }
    }
    
    // Comprobar posición inicial del scroll
    handleScroll();
    
    // Agregar listener para el evento scroll
    window.addEventListener('scroll', handleScroll);
    
    // Cerrar sidebar con tecla Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && mobileSidebar?.classList.contains('active')) {
        closeSidebar();
      }
    });
  });
</script>
